# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –≤ PDF

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
```
Error: WinAnsi cannot encode "–û" (0x041e)
```

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã Helvetica –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —à—Ä–∏—Ñ—Ç–æ–≤
- **`src/utils/cyrillicFontUtils.ts`** - –æ—Å–Ω–æ–≤–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–æ–≤** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### 2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —à—Ä–∏—Ñ—Ç–æ–≤ (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)
1. **Times-Roman** - –ª—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
2. **Times-Bold** - –∂–∏—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç Times-Roman
3. **Courier** - –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
4. **Courier-Bold** - –∂–∏—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç Courier

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **`ShipmentPDFGenerator.tsx`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É —à—Ä–∏—Ñ—Ç–æ–≤
- **`PDFTestComponent.tsx`** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —à—Ä–∏—Ñ—Ç–∞
```typescript
const { font: regularFont, needsTransliteration } = 
  await getOptimalFont(pdfDoc, '–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç', false);
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
```typescript
const safeText = (text: string, isBold: boolean = false) => {
  const font = isBold ? boldFont : regularFont;
  const needsTransliteration = isBold ? needsTransliterationBold : needsTransliterationRegular;
  
  if (needsTransliteration) {
    return safeTextForFont(text, font);
  }
  return text;
};
```

## üîç Fallback –º–µ—Ö–∞–Ω–∏–∑–º

### –£—Ä–æ–≤–µ–Ω—å 1: –®—Ä–∏—Ñ—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- Times-Roman, Times-Bold
- Courier, Courier-Bold

### –£—Ä–æ–≤–µ–Ω—å 2: –ë–∞–∑–æ–≤—ã–µ —à—Ä–∏—Ñ—Ç—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- Helvetica, Helvetica-Bold
- –° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–µ–π

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ PDF
```typescript
// –ó–∞–≥–æ–ª–æ–≤–æ–∫
currentPage.drawText(safeText('–û–¢–ì–†–£–ó–û–ß–ù–´–ô –õ–ò–°–¢', true), {
  x: pageWidth / 2,
  y: yPosition,
  size: 18,
  font: boldFont,
  color: rgb(0, 0, 0)
});

// –û–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç
currentPage.drawText(`${safeText('–î–∞—Ç–∞')}: ${date}`, {
  x: margin,
  y: yPosition,
  size: 10,
  font: regularFont,
  color: rgb(0, 0, 0)
});
```

### –í —Ç–µ—Å—Ç–æ–≤–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
```typescript
// –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
page.drawText(safeText('–¢–ï–°–¢–û–í–´–ô PDF –° –†–£–°–°–ö–ò–ú –Ø–ó–´–ö–û–ú', true), {
  x: pageWidth / 2 - 150,
  y: yPosition,
  size: 20,
  font: boldFont,
  color: rgb(0, 0, 0)
});
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è **–±–µ–∑ –æ—à–∏–±–æ–∫ –∫–æ–¥–∏—Ä–æ–≤–∫–∏**:

‚úÖ **–ö–∏—Ä–∏–ª–ª–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** –≤–æ –≤—Å–µ—Ö —à—Ä–∏—Ñ—Ç–∞—Ö
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —à—Ä–∏—Ñ—Ç—ã
‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –±–µ–∑ –æ—à–∏–±–æ–∫ WinAnsi
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ä—É—Å—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤** –≤–∫–ª—é—á–∞—è —ë, –π, —â –∏ –¥—Ä.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** `npm run dev`
2. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
3. **–°–æ–∑–¥–∞–π—Ç–µ PDF** —Å —Ä—É—Å—Å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫** –≤ –∫–æ–Ω—Å–æ–ª–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –®—Ä–∏—Ñ—Ç—ã Times-Roman
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã:** ‚úÖ –ü–æ–ª–Ω–∞—è
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** Unicode
- **–ö–∞—á–µ—Å—Ç–≤–æ:** –û—Ç–ª–∏—á–Ω–æ–µ

### –®—Ä–∏—Ñ—Ç—ã Courier
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã:** ‚úÖ –ü–æ–ª–Ω–∞—è
- **–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** Unicode
- **–°—Ç–∏–ª—å:** –ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
```typescript
export async function createCyrillicFont(
  pdfDoc: PDFDocument,
  isBold: boolean = false
): Promise<PDFFont> {
  try {
    // –ü—ã—Ç–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Times-Roman
    return await pdfDoc.embedFont('Times-Roman');
  } catch (error) {
    // Fallback –Ω–∞ Courier
    return await pdfDoc.embedFont('Courier');
  }
}
```

## üéâ –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

- ‚ùå –£–±—Ä–∞–Ω–∞ –æ—à–∏–±–∫–∞ WinAnsi
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
- ‚úÖ –°–æ–∑–¥–∞–Ω –Ω–∞–¥–µ–∂–Ω—ã–π fallback –º–µ—Ö–∞–Ω–∏–∑–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

–¢–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç! üá∑üá∫‚ú®

